<!-- <p>spa-lecturer works!</p> -->


<!-- <p>visualiser works!</p> -->
<div class="container mt-4">
	<h3 class="text-primary text-center mb-4">Gale Shapley Faculty-Proposing</h3>

	<div class="text-center mb-4">
		<button class="btn btn-outline-info" (click)="descshow()">More about the algorithm</button>
	  </div>
	
	  <div *ngIf="showdesc" class="alert alert-secondary">
		<strong>Initialization:</strong><br>
		&rarr; All students start free and unassigned.<br>
		&rarr; Every project and lecturer is unsubscribed (no provisional assignments).<br><br>
	
		We iterate through the free projects, (free projects → the |assigned| < capacity)
		Each project proposes to their highest ranked student, not yet rejected
		i.e., Here there could be two cases : 
		<ul>
			<li> The proposed student is already assigned to a project<br>
				— the assigned project’s and the currently traversed project’s ranks are compared, 
				if the current project ranks higher the students assignment is swapped and the student 
				is removed from the projects assignment list. Else the student is skipped 
				( i.e the student rejects the project)
				</li>
			<li>
				The proposed student is not assigned to a project, the student accepts the project 
				( and the student is added to the project’s assigned list)
			</li>
		</ul>
		This continues until : 
		<ul><li>All projects are full</li>
		<li>Or all the students in the preference list are exhausted.</li>
		</ul>


		Outcome  : <strong>Project-optimal </strong>: Each project gets the best student they can get in any stable matching. Students might get less-preferred projects.


	  </div>
  
	<div class="card shadow p-3 animate__animated animate__fadeIn">
	  <div class="card-body">
		<h5 class="card-title">Step {{ currentStep + 1 }} of {{ steps.length }}</h5>
		<p class="card-text text-info">{{ steps[currentStep].message }}</p>
  
		<div class="row">
		  <div class="col-md-6">
			<h6>Student Assignments</h6>
			<ul class="list-group">
				<li class="list-group-item" *ngFor="let sid of objectKeys(steps[currentStep]?.assignments)">
				Student {{ sid }} → Project {{ steps[currentStep].assignments[sid] }}
			  </li>
			</ul>
		  </div>
  
		  <div class="col-md-6">
			<h6>Project Status</h6>
			<ul class="list-group">
			  <li class="list-group-item" *ngFor="let pid of objectKeys(steps[currentStep]?.projectState)">
				Project {{ pid }} [Cap: {{ steps[currentStep].projectState[pid].capacity }}]<br>
				Assigned: {{ steps[currentStep].projectState[pid].assigned.join(', ') || 'None' }}
			  </li>
			</ul>
		  </div>
		</div>
  
		<div class="mt-4 text-center">
		  <button class="btn btn-outline-primary me-2" (click)="prevStep()" [disabled]="currentStep === 0">Previous</button>
		  <button class="btn btn-outline-success" (click)="nextStep()" [disabled]="currentStep === steps.length - 1">Next</button>
		</div>
	  </div>
	</div>
  </div>