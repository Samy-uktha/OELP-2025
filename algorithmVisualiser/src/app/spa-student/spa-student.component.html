<!-- <p>spa-lecturer works!</p> -->


<!-- <p>visualiser works!</p> -->
<div class="container mt-4">
	<h3 class="text-primary text-center mb-4">SPA Student-Proposing Visualizer</h3>
  
	<div class="text-center mb-4">
		<button class="btn btn-outline-info" (click)="descshow()">More about the algorithm</button>
	  </div>
	
	  <div *ngIf="showdesc" class="alert alert-secondary">
		<strong>Initialization:</strong><br>
		&rarr; All students start free and unassigned.<br>
		&rarr; Every project and lecturer is unsubscribed (no provisional assignments).<br><br>
	
		Initially all students are free, and all projects and lecturers are totally unsubscribed.
		 As long as there is some student ğ‘ ğ‘– who is free and who has a non-empty preference list,
		  ğ‘ ğ‘– applies to the first project ğ‘ğ‘— on his/her list. We let ğ‘™ğ‘˜ be the lecturer who offers ğ‘ğ‘—. 
		  Immediately, ğ‘ ğ‘– becomes provisionally assigned to ğ‘ğ‘— (and to ğ‘™ğ‘˜). <br> <br>

		  If ğ‘ğ‘— is over-subscribed, then the worst student ğ‘ ğ‘Ÿ assigned to ğ‘ğ‘— is rejected. The pair 
		  (ğ‘ ğ‘Ÿ,ğ‘ğ‘—) will be deleted by the subsequent conditional that tests for ğ‘ğ‘— being full. The pair (ğ‘ ğ‘Ÿ,ğ‘ğ‘¡) 
		  will be deleted by either of the two subsequent conditionals, where ğ‘ğ‘¡ was the project most recently assigned ğ‘ ğ‘Ÿ.
		  <br> <br>

		  If the project is full (i.e., at capacity), the lecturer removes from the project's preference <br>
		   list all students less preferred than the worst currently assigned student.

		   <br> <br>
		   The algorithm ends when every free student has an empty preference list (i.e. cannot propose any further)
		    or all students have been provisionally assigned. The final matching is then the set of provisional assignments.
			<br>
			<br>

			<strong>Outcome : Student optimal </strong>  allocations (i.e., it prioritises the student preferences over faculty)


	  </div>

	<div class="card shadow p-3 animate__animated animate__fadeIn">
	  <div class="card-body">
		<h5 class="card-title">Step {{ currentStep + 1 }} of {{ steps.length }}</h5>
		<p class="card-text text-info">{{ steps[currentStep].message }}</p>
  
		<div class="row">
		  <div class="col-md-6">
			<h6>Project Assignments</h6>
			<ul class="list-group">
				<li class="list-group-item" *ngFor="let sid of objectKeys(steps[currentStep]?.assignments)">
				Project {{ sid }} â†’ Student {{ steps[currentStep].assignments[sid] }}
			  </li>
			</ul>
		  </div>
  
		  <div class="col-md-6">
			<h6>Project Status</h6>
			<ul class="list-group">
			  <li class="list-group-item" *ngFor="let pid of objectKeys(steps[currentStep]?.projectState)">
				Project {{ pid }} [Cap: {{ steps[currentStep].projectState[pid].capacity }}]<br>
				Assigned: {{ steps[currentStep].projectState[pid].assigned.join(', ') || 'None' }}
			  </li>
			</ul>
		  </div>
		</div>
  
		<div class="mt-4 text-center">
		  <button class="btn btn-outline-primary me-2" (click)="prevStep()" [disabled]="currentStep === 0">Previous</button>
		  <button class="btn btn-outline-success" (click)="nextStep()" [disabled]="currentStep === steps.length - 1">Next</button>
		</div>
	  </div>
	</div>
  </div>
